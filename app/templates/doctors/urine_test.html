{% extends 'doctors/base.html' %}

{% block title %}Urine Analysis{% endblock %}

{% block sidebar %}
{% include 'doctors/sidebar.html' %}
{% endblock %}

{% block navbar %}
{% include 'doctors/dashboard_navbar.html' %}
{% endblock %}

{% block content %}
<div class="container mx-auto p-6">
    <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-6 rounded-lg mb-6 text-white flex items-center justify-between">
        <div>
            <div class="flex items-center mb-2 space-x-1">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.87868 6.87868C6.33579 7.42157 6 8.17157 6 9V14H8.1377C8.13775 14.0441 8.13924 14.0884 8.14222 14.133L9.87555 40.133C9.94559 41.1836 10.8182 42 11.8711 42H35.1289C36.1818 42 37.0544 41.1836 37.1245 40.133L38.8578 14.133C38.8608 14.0884 38.8623 14.0441 38.8623 14H42V9C42 8.1115 41.6137 7.31321 41 6.76389C40.9878 6.75302 40.9756 6.74224 40.9633 6.73156C40.7578 6.5536 40.528 6.40309 40.2794 6.28571C40.2426 6.26833 40.2054 6.25167 40.1677 6.23575C39.8088 6.08395 39.4142 6 39 6H9C8.54237 6 8.10866 6.10247 7.72059 6.28571C7.7135 6.28906 7.70643 6.29243 7.69938 6.29583C7.44407 6.41885 7.20886 6.57695 7 6.76389C6.9585 6.80103 6.91805 6.83931 6.87868 6.87868ZM36.8622 14H10.1378L10.4045 18H21C22.1046 18 23 18.8954 23 20V22H36.3289L36.8622 14ZM11.1142 20L11.892 34H21V20H11.1142ZM11 11.7143H9V8.28571H11V11.7143ZM15 8.28571H13V11.7143H15V8.28571ZM19 11.7143H17V8.28571H19V11.7143ZM23 8.28571H21V11.7143H23V8.28571ZM27 11.7143H25V8.28571H27V11.7143ZM31 8.28571H29V11.7143H31V8.28571ZM35 11.7143H33V8.28571H35V11.7143ZM39 8.28571H37V11.7143H39V8.28571Z" fill="currentColor"/>
                    </svg>
                <h1 class="text-3xl font-bold">Urine Analysis</h1>
            </div>
            <p>Enter urine analysis data for the selected patient.</p>
        </div>
    </div>

    <!-- Navigation Bar -->
    <div class="border-b-2 border-gray-300 mb-8 text-center">
        <div class="flex space-x-4 -mb-px text-sm font-semibold text-gray-600 mt-4">
            <button class="tabs focus:outline-none py-4 px-1 border-b-2 border-blue-500 text-blue-600 hover:text-blue-800" onclick="openTab(event, 'physical_properties')">Physical Properties</button>
            <button class="tabs focus:outline-none py-4 px-1 border-b-2 border-transparent text-gray-600 hover:text-blue-800" onclick="openTab(event, 'chemical_properties')">Chemical Properties</button>
            <button class="tabs focus:outline-none py-4 px-1 border-b-2 border-transparent text-gray-600 hover:text-blue-800" onclick="openTab(event, 'microscopic_examination')">Microscopic Examination</button>
        </div>
    </div>

    <!-- Forms for Each Section -->
    <form action="" method="POST" class="space-y-6">
        <input type="hidden" name="patient_id" value="{{ patient_id }}">

        <!-- Physical Properties -->
        <div id="physical_properties" class="test-section">
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-2 rounded-lg mb-5 text-white flex items-center mb-2 space-x-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 48 48" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M6.87868 6.87868C6.33579 7.42157 6 8.17157 6 9V14H8.1377C8.13775 14.0441 8.13924 14.0884 8.14222 14.133L9.87555 40.133C9.94559 41.1836 10.8182 42 11.8711 42H35.1289C36.1818 42 37.0544 41.1836 37.1245 40.133L38.8578 14.133C38.8608 14.0884 38.8623 14.0441 38.8623 14H42V9C42 8.1115 41.6137 7.31321 41 6.76389C40.9878 6.75302 40.9756 6.74224 40.9633 6.73156C40.7578 6.5536 40.528 6.40309 40.2794 6.28571C40.2426 6.26833 40.2054 6.25167 40.1677 6.23575C39.8088 6.08395 39.4142 6 39 6H9C8.54237 6 8.10866 6.10247 7.72059 6.28571C7.7135 6.28906 7.70643 6.29243 7.69938 6.29583C7.44407 6.41885 7.20886 6.57695 7 6.76389C6.9585 6.80103 6.91805 6.83931 6.87868 6.87868ZM36.8622 14H10.1378L10.4045 18H21C22.1046 18 23 18.8954 23 20V22H36.3289L36.8622 14ZM11.1142 20L11.892 34H21V20H11.1142ZM11 11.7143H9V8.28571H11V11.7143ZM15 8.28571H13V11.7143H15V8.28571ZM19 11.7143H17V8.28571H19V11.7143ZM23 8.28571H21V11.7143H23V8.28571ZM27 11.7143H25V8.28571H27V11.7143ZM31 8.28571H29V11.7143H31V8.28571ZM35 11.7143H33V8.28571H35V11.7143ZM39 8.28571H37V11.7143H39V8.28571Z" fill="currentColor"/>
                        </svg>
                <h2 class="text-2xl font-semibold">Physical Properties</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label for="color" class="block text-gray-700"><i class="fas fa-tint mr-2"></i>Color:</label>
                        <input type="text" id="color" name="color" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="clarity" class="block text-gray-700"><i class="fas fa-eye-dropper mr-2"></i>Clarity:</label>
                        <input type="text" id="clarity" name="clarity" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="specific_gravity" class="block text-gray-700"><i class="fas fa-balance-scale mr-2"></i>Specific Gravity (1.005-1.030):</label>
                        <input type="number" step="0.001" id="specific_gravity" name="specific_gravity" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" oninput="checkRange(this, 1.005, 1.030)">
                    </div>
                    <div class="mb-4">
                        <label for="volume" class="block text-gray-700"><i class="fas fa-flask mr-2"></i>Volume (mL):</label>
                        <input type="number" id="volume" name="volume" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                </div>
            </div>
        </div>

        <!-- Chemical Properties -->
        <div id="chemical_properties" class="test-section hidden">
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-2 rounded-lg mb-5 text-white flex items-center mb-2 space-x-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 48 48" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M6.87868 6.87868C6.33579 7.42157 6 8.17157 6 9V14H8.1377C8.13775 14.0441 8.13924 14.0884 8.14222 14.133L9.87555 40.133C9.94559 41.1836 10.8182 42 11.8711 42H35.1289C36.1818 42 37.0544 41.1836 37.1245 40.133L38.8578 14.133C38.8608 14.0884 38.8623 14.0441 38.8623 14H42V9C42 8.1115 41.6137 7.31321 41 6.76389C40.9878 6.75302 40.9756 6.74224 40.9633 6.73156C40.7578 6.5536 40.528 6.40309 40.2794 6.28571C40.2426 6.26833 40.2054 6.25167 40.1677 6.23575C39.8088 6.08395 39.4142 6 39 6H9C8.54237 6 8.10866 6.10247 7.72059 6.28571C7.7135 6.28906 7.70643 6.29243 7.69938 6.29583C7.44407 6.41885 7.20886 6.57695 7 6.76389C6.9585 6.80103 6.91805 6.83931
                        6.87868 6.87868ZM36.8622 14H10.1378L10.4045 18H21C22.1046 18 23 18.8954 23 20V22H36.3289L36.8622 14ZM11.1142 20L11.892 34H21V20H11.1142ZM11 11.7143H9V8.28571H11V11.7143ZM15 8.28571H13V11.7143H15V8.28571ZM19 11.7143H17V8.28571H19V11.7143ZM23 8.28571H21V11.7143H23V8.28571ZM27 11.7143H25V8.28571H27V11.7143ZM31 8.28571H29V11.7143H31V8.28571ZM35 11.7143H33V8.28571H35V11.7143ZM39 8.28571H37V11.7143H39V8.28571Z" fill="currentColor"/>
                        </svg>
                <h2 class="text-2xl font-semibold">Chemical Properties</h2>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label for="ph" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>pH (4.5-8.0):</label>
                        <input type="number" step="0.1" id="ph" name="ph" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" oninput="checkRange(this, 4.5, 8.0)">
                    </div>
                    <div class="mb-4">
                        <label for="protein" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Protein (mg/dL):</label>
                        <input type="number" id="protein" name="protein" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="glucose" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Glucose (mg/dL):</label>
                        <input type="number" id="glucose" name="glucose" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="ketones" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Ketones (mg/dL):</label>
                        <input type="number" id="ketones" name="ketones" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="bilirubin" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Bilirubin (mg/dL):</label>
                        <input type="number" id="bilirubin" name="bilirubin" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="urobilinogen" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Urobilinogen (mg/dL):</label>
                        <input type="number" id="urobilinogen" name="urobilinogen" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="nitrite" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Nitrite:</label>
                        <input type="text" id="nitrite" name="nitrite" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="leukocyte_esterase" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Leukocyte Esterase:</label>
                        <input type="text" id="leukocyte_esterase" name="leukocyte_esterase" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                </div>
            </div>
        </div>

        <!-- Microscopic Examination -->
        <div id="microscopic_examination" class="test-section hidden">
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-2 rounded-lg mb-5 text-white flex items-center mb-2 space-x-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 48 48" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M6.87868 6.87868C6.33579 7.42157 6 8.17157 6 9V14H8.1377C8.13775 14.0441 8.13924 14.0884 8.14222 14.133L9.87555 40.133C9.94559 41.1836 10.8182 42 11.8711 42H35.1289C36.1818 42 37.0544 41.1836 37.1245 40.133L38.8578 14.133C38.8608 14.0884 38.8623 14.0441 38.8623 14H42V9C42 8.1115 41.6137 7.31321 41 6.76389C40.9878 6.75302 40.9756 6.74224 40.9633 6.73156C40.7578 6.5536 40.528 6.40309 40.2794 6.28571C40.2426 6.26833 40.2054 6.25167 40.1677 6.23575C39.8088 6.08395 39.4142 6 39 6H9C8.54237 6 8.10866 6.10247 7.72059 6.28571C7.7135 6.28906 7.70643 6.29243 7.69938 6.29583C7.44407 6.41885 7.20886 6.57695 7 6.76389C6.9585 6.80103 6.91805 6.83931
                        6.87868 6.87868ZM36.8622 14H10.1378L10.4045 18H21C22.1046 18 23 18.8954 23 20V22H36.3289L36.8622 14ZM11.1142 20L11.892 34H21V20H11.1142ZM11 11.7143H9V8.28571H11V11.7143ZM15 8.28571H13V11.7143H15V8.28571ZM19 11.7143H17V8.28571H19V11.7143ZM23 8.28571H21V11.7143H23V8.28571ZM27 11.7143H25V8.28571H27V11.7143ZM31 8.28571H29V11.7143H31V8.28571ZM35 11.7143H33V8.28571H35V11.7143ZM39 8.28571H37V11.7143H39V8.28571Z" fill="currentColor"/>
                        </svg>
                <h2 class="text-2xl font-semibold">Microscopic Examination</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label for="rbc" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>RBC (cells/hpf):</label>
                        <input type="number" id="rbc" name="rbc" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="wbc" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>WBC (cells/hpf):</label>
                        <input type="number" id="wbc" name="wbc" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="epithelial_cells" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Epithelial Cells:</label>
                        <input type="text" id="epithelial_cells" name="epithelial_cells" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="casts" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Casts:</label>
                        <input type="text" id="casts" name="casts" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="crystals" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Crystals:</label>
                        <input type="text" id="crystals" name="crystals" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="bacteria" class="block text-gray-700"><i class="fas fa-vial mr-2"></i>Bacteria:</label>
                        <input type="text" id="bacteria" name="bacteria" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                </div>
            </div>
        </div>
        
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-full focus:outline-none focus:shadow-outline">Submit</button>
    </form>
</div>

<script>
function openTab(evt, tabName) {
    var i, tabContent, tabLinks;
    tabContent = document.getElementsByClassName("test-section");
    for (i = 0; i < tabContent.length; i++) {
        tabContent[i].style.display = "none";
    }
    tabLinks = document.getElementsByClassName("tabs");
    for (i = 0; i < tabLinks.length; i++) {
        tabLinks[i].className = tabLinks[i].className.replace(" text-blue-600 border-blue-500", " text-gray-600 border-transparent");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " text-blue-600 border-blue-500";
}

// Show the physical properties section by default
document.getElementById("physical_properties").style.display = "block";
document.getElementsByClassName("tabs")[0].className += " text-blue-600 border-blue-500";
</script>
{% endblock %}
