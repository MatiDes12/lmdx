{% extends 'doctors/base.html' %}

{% block title %}Doctors{% endblock %}

{% block sidebar %}
{% include 'doctors/sidebar.html' %}
{% endblock %}

{% block navbar %}
{% include 'doctors/dashboard_navbar.html' %}
{% endblock %}

{% block content %}
<div class="container mx-auto p-6">
    <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-6 rounded-lg mb-6 text-white flex items-center justify-between">
        <div>
        <div class="flex items-center mb-2 space-x-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 48 48" fill="none">
                <path d="M38 30.2626C38 37.8496 31.732 44 24 44C16.268 44 10 37.8496 10 30.2626C10 18.2424 24 4 24 4C24 4 38 18.2424 38 30.2626Z" fill="currentColor"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M24 42C30.6633 42 36 36.7095 36 30.2626C36 24.9058 32.8223 18.7771 29.3548 13.761C27.6552 11.3023 25.9518 9.20336 24.6725 7.71881C24.432 7.4398 24.2069 7.18289 24 6.9498C23.7931 7.18289 23.568 7.4398 23.3275 7.71881C22.0482 9.20336 20.3448 11.3023 18.6452 13.761C15.1777 18.7771 12 24.9058 12 30.2626C12 36.7095 17.3367 42 24 42ZM22.6397 5.47002C19.1224 9.40884 10 20.5597 10 30.2626C10 37.8496 16.268 44 24 44C31.732 44 38 37.8496 38 30.2626C38 20.5597 28.8776 9.40884 25.3603 5.47002C24.5203 4.52933 24 4 24 4C24 4 23.4797 4.52933 22.6397 5.47002Z" fill="currentColor"/>
            </svg>
            <h1 class="text-3xl font-bold">Blood Tests</h1>
        </div>

            <p>Enter test data for the selected patient.</p>
        </div>
    </div>
    
    <!-- Navigation Bar -->
    <div class="border-b-2 border-gray-300 mb-8 text-center">
        <div class="flex space-x-4 -mb-px text-sm font-semibold text-gray-600 mt-4">
        <button class="tabs focus:outline-none py-4 px-1 border-b-2 border-blue-500 text-blue-600 hover:text-blue-800" onclick="openTab(event, 'comprehensive_metabolic_panel')">Comprehensive Metabolic Panel</button>
        <button class="tabs focus:outline-none py-4 px-1 border-b-2 border-blue-500 text-blue-600 hover:text-blue-800" onclick="openTab(event, 'lipid_panel')">Lipid Panel</button>
        <button class="tabs focus:outline-none py-4 px-1 border-b-2 border-blue-500 text-blue-600 hover:text-blue-800" onclick="openTab(event, 'cbc_auto_differential')">CBC Auto Differential</button>
        <button class="tabs focus:outline-none py-4 px-1 border-b-2 border-blue-500 text-blue-600 hover:text-blue-800" onclick="openTab(event, 'thyroid_simulating_hormone')">Thyroid Stimulating Hormone</button>
        <button class="tabs focus:outline-none py-4 px-1 border-b-2 border-blue-500 text-blue-600 hover:text-blue-800" onclick="openTab(event, 'lipid_panel_direct_ldl')">Lipid Panel with Direct LDL</button>
        </div>
    </div>
    
    <!-- Forms for Each Section -->
    <form action="{{ url_for('doctor.submit_test') }}" method="POST" class="space-y-6">
        <input type="hidden" name="patient_id" value="{{ patient_id }}">
        <input type="hidden" name="test_type" value="{{ test_type }}">

        <!-- Comprehensive Metabolic Panel -->
        <div id="comprehensive_metabolic_panel" class="test-section">
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-2xl font-semibold mb-4">Comprehensive Metabolic Panel</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label for="sodium" class="block text-gray-700">Sodium (136-145 mmol/L):</label>
                        <input type="number" id="sodium" name="sodium" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="potassium" class="block text-gray-700">Potassium (3.5-5.0 mmol/L):</label>
                        <input type="number" id="potassium" name="potassium" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="chloride" class="block text-gray-700">Chloride (98-107 mmol/L):</label>
                        <input type="number" id="chloride" name="chloride" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="carbon_dioxide" class="block text-gray-700">Carbon Dioxide (23-29 mmol/L):</label>
                        <input type="number" id="carbon_dioxide" name="carbon_dioxide" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="glucose" class="block text-gray-700">Glucose (70-99 mg/dL):</label>
                        <input type="number" id="glucose" name="glucose" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="calcium" class="block text-gray-700">Calcium (8.5-10.2 mg/dL):</label>
                        <input type="number" id="calcium" name="calcium" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="protein" class="block text-gray-700">Total Protein (6.0-8.3 g/dL):</label>
                        <input type="number" id="protein" name="protein" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="albumin" class="block text-gray-700">Albumin (3.5-5.0 g/dL):</label>
                        <input type="number" id="albumin" name="albumin" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="bilirubin" class="block text-gray-700">Bilirubin (0.1-1.2 mg/dL):</label>
                        <input type="number" id="bilirubin" name="bilirubin" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="alkaline_phosphatase" class="block text-gray-700">Alkaline Phosphatase (44-147 IU/L):</label>
                        <input type="number" id="alkaline_phosphatase" name="alkaline_phosphatase" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="alt" class="block text-gray-700">ALT (7-56 IU/L):</label>
                        <input type="number" id="alt" name="alt" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="ast" class="block text-gray-700">AST (10-40 IU/L):</label>
                        <input type="number" id="ast" name="ast" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                </div>
            </div>
        </div>

        <!-- Lipid Panel -->
        <div id="lipid_panel" class="test-section hidden">
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-2xl font-semibold mb-4">Lipid Panel</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label for="cholesterol" class="block text-gray-700">Cholesterol (mg/dL):</label>
                        <input type="number" id="cholesterol" name="cholesterol" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="hdl" class="block text-gray-700">HDL (mg/dL):</label>
                        <input type="number" id="hdl" name="hdl" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="ldl" class="block text-gray-700">LDL (mg/dL):</label>
                        <input type="number" id="ldl" name="ldl" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="triglycerides" class="block text-gray-700">Triglycerides (mg/dL):</label>
                        <input type="number" id="triglycerides" name="triglycerides" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                </div>
            </div>
        </div>

        <!-- CBC Auto Differential -->
        <div id="cbc_auto_differential" class="test-section hidden">
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-2xl font-semibold mb-4">CBC Auto Differential</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label for="wbc" class="block text-gray-700">WBC (cells/mcL):</label>
                        <input type="number" id="wbc" name="wbc" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="rbc" class="block text-gray-700">RBC (cells/mcL):</label>
                        <input type="number" id="rbc" name="rbc" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="hemoglobin" class="block text-gray-700">Hemoglobin (g/dL):</label>
                        <input type="number" id="hemoglobin" name="hemoglobin" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="hematocrit" class="block text-gray-700">Hematocrit (%):</label>
                        <input type="number" id="hematocrit" name="hematocrit" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="mcv" class="block text-gray-700">MCV (fL):</label>
                        <input type="number" id="mcv" name="mcv" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="mch" class="block text-gray-700">MCH (pg):</label>
                        <input type="number" id="mch" name="mch" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="mchc" class="block text-gray-700">MCHC (g/dL):</label>
                        <input type="number" id="mchc" name="mchc" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="rdw" class="block text-gray-700">RDW (%):</label>
                        <input type="number" id="rdw" name="rdw" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="platelets" class="block text-gray-700">Platelets (cells/mcL):</label>
                        <input type="number" id="platelets" name="platelets" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div class="mb-4">
                        <label for="mpv" class="block text-gray-700">MPV (fL):</label>
                        <input type="number" id="mpv" name="mpv" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                </div>
            </div>
        </div>

        <!-- Thyroid Stimulating Hormone -->
        <div id="thyroid_simulating_hormone" class="test-section hidden">
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-2xl font-semibold mb-4">Thyroid Stimulating Hormone</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label for="tsh" class="block text-gray-700">TSH (mIU/L):</label>
                        <input type="number" id="tsh" name="tsh" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                </div>
            </div>
        </div>

        <!-- Lipid Panel with Direct LDL -->
        <div id="lipid_panel_direct_ldl" class="test-section hidden">
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-2xl font-semibold mb-4">Lipid Panel with Direct LDL</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label for="ldl" class="block text-gray-700">Direct LDL (mg/dL):</label>
                        <input type="number" id="ldl" name="ldl" class="appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                </div>
            </div>
        </div>
        
        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-full focus:outline-none focus:shadow-outline">Submit</button>
    </form>
</div>

<script>
function showSection(sectionId) {
    document.querySelectorAll('.test-section').forEach(section => {
        section.classList.add('hidden');
    });
    document.getElementById(sectionId).classList.remove('hidden');
}

function openTab(evt, tabName) {
    var i, tabContent, tabLinks;
    tabContent = document.getElementsByClassName("tab-content");
    for (i = 0; i < tabContent.length; i++) {
        tabContent[i].style.display = "none";
    }
    tabLinks = document.getElementsByClassName("tabs");
    for (i = 0; i < tabLinks.length; i++) {
        tabLinks[i].className = tabLinks[i].className.replace(" border-blue-500 text-blue-600", " border-transparent text-gray-600");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " border-blue-500 text-blue-600";
}

// Show the account settings section by default
document.getElementById("comprehensive_metabolic_panel").style.display = "block";
</script>
{% endblock %}
