{% extends 'admin/base.html' %}

{% block title %}Privacy Settings{% endblock %}

{% block sidebar %}
{% include 'admin/sidebar.html' %}
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Stylish Header -->
    <div class="bg-gradient-to-r from-purple-500 to-indigo-600 p-8 rounded-xl shadow-2xl mb-10">
        <div class="flex items-center">
            <div class="bg-white p-3 rounded-full mr-6">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
            </div>
            <div>
                <h2 class="text-4xl font-extrabold text-white mb-2">Privacy Settings</h2>
                <p class="text-white text-xl opacity-80">Manage privacy policies, data retention, and user consent</p>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Management -->
    <div class="bg-white p-6 rounded-lg shadow-md mb-8">
        <h3 class="text-2xl font-semibold mb-4">Privacy Policy Management</h3>
        <form action="{{ url_for('admin.update_compliance') }}" method="POST">
            <div class="mb-4">
                <label for="privacy_policy" class="block text-sm font-medium text-gray-700">Privacy Policy</label>
                <textarea id="privacy_policy" name="privacy_policy" rows="10" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">{{ privacy_policy }}</textarea>
            </div>
            <div class="mb-4">
                <label for="last_updated" class="block text-sm font-medium text-gray-700">Last Updated</label>
                <input type="date" id="last_updated" name="last_updated" value="{{ last_updated }}" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
            </div>
            <button type="submit" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">
                Update Privacy Policy
            </button>
        </form>
    </div>

    <!-- Data Retention Settings -->
    <div class="bg-white p-6 rounded-lg shadow-md mb-8">
        <h3 class="text-2xl font-semibold mb-4">Data Retention Settings</h3>
        <form action="{{ url_for('admin.update_data_retention') }}" method="POST">
            <div class="mb-4">
                <label for="user_data_retention" class="block text-sm font-medium text-gray-700">User Data Retention Period (days)</label>
                <input type="number" id="user_data_retention" name="user_data_retention" value="{{ user_data_retention }}" min="1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
            </div>
            <div class="mb-4">
                <label for="activity_log_retention" class="block text-sm font-medium text-gray-700">Activity Log Retention Period (days)</label>
                <input type="number" id="activity_log_retention" name="activity_log_retention" value="{{ activity_log_retention }}" min="1" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
            </div>
            <button type="submit" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">
                Update Data Retention Settings
            </button>
        </form>
    </div>

    <!-- User Consent Controls -->
    <div class="bg-white p-6 rounded-lg shadow-md mb-8">
        <h3 class="text-2xl font-semibold mb-4">User Consent Controls</h3>
        <form action="{{ url_for('admin.update_consent_settings') }}" method="POST">
            <div class="mb-4">
                <label class="flex items-center">
                    <input type="checkbox" name="require_consent" {% if require_consent %}checked{% endif %} class="form-checkbox h-5 w-5 text-purple-600">
                    <span class="ml-2 text-gray-700">Require user consent for data collection</span>
                </label>
            </div>
            <div class="mb-4">
                <label class="flex items-center">
                    <input type="checkbox" name="allow_data_export" {% if allow_data_export %}checked{% endif %} class="form-checkbox h-5 w-5 text-purple-600">
                    <span class="ml-2 text-gray-700">Allow users to export their data</span>
                </label>
            </div>
            <div class="mb-4">
                <label class="flex items-center">
                    <input type="checkbox" name="allow_account_deletion" {% if allow_account_deletion %}checked{% endif %} class="form-checkbox h-5 w-5 text-purple-600">
                    <span class="ml-2 text-gray-700">Allow users to delete their account</span>
                </label>
            </div>
            <button type="submit" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">
                Update Consent Settings
            </button>
        </form>
    </div>
</div>
{% endblock %}
